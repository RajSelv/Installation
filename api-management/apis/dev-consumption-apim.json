{
  "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
    "service_dev-apim-kcloud-apim_name": {
      "type": "string",
      "defaultValue": "dev-apim-kcloud-apim"
    },
    "api_echo-api_name": {
      "type": "string",
      "defaultValue": "echo-api"
    },
    "echo-api_apiRevision": {
      "type": "string",
      "defaultValue": "1"
    },
    "echo-api_serviceUrl": {
      "type": "string",
      "defaultValue": "http://echoapi.cloudapp.net/api"
    },
    "echo-api_isCurrent": {
      "type": "bool",
      "defaultValue": true
    },
    "api_k-rauta-api-warehouses-service_name": {
      "type": "string",
      "defaultValue": "k-rauta-api-warehouses-service"
    },
    "k-rauta-api-warehouses-service_apiRevision": {
      "type": "string",
      "defaultValue": "1"
    },
    "k-rauta-api-warehouses-service_serviceUrl": {
      "type": "string",
      "defaultValue": "https://pzpc5o3llb.execute-api.eu-west-1.amazonaws.com"
    },
    "k-rauta-api-warehouses-service_isCurrent": {
      "type": "bool",
      "defaultValue": true
    },
    "api_k-rauta-consumption-api_name": {
      "type": "string",
      "defaultValue": "k-rauta-consumption-api"
    },
    "k-rauta-consumption-api_apiRevision": {
      "type": "string",
      "defaultValue": "1"
    },
    "k-rauta-consumption-api_isCurrent": {
      "type": "bool",
      "defaultValue": true
    },
    "api_k-rauta-consumption-api_postConsumptionActionsCalculate_backendurl": {
      "type": "string",
      "defaultValue": "https://k-rauta-api-consumption-dev.herokuapp.com"
    },
    "api_k-rauta-consumption-api_backendurl": {
      "type": "string",
      "defaultValue": "https://k-rauta-api-consumption-dev.herokuapp.com"
    },
    "api_k-rauta-geo_name": {
      "type": "string",
      "defaultValue": "k-rauta-geo"
    },
    "k-rauta-geo_apiRevision": {
      "type": "string",
      "defaultValue": "1"
    },
    "k-rauta-geo_isCurrent": {
      "type": "bool",
      "defaultValue": true
    },
    "api_k-rauta-geo_getGeocode_backendurl": {
      "type": "string",
      "defaultValue": "https://k-rauta-api-geo-dev.herokuapp.com"
    },
    "api_k-rauta-geo_postGeocode_backendurl": {
      "type": "string",
      "defaultValue": "https://k-rauta-api-geo-dev.herokuapp.com"
    },
    "api_k-rauta-merchandise-category-api_name": {
      "type": "string",
      "defaultValue": "k-rauta-merchandise-category-api"
    },
    "k-rauta-merchandise-category-api_apiRevision": {
      "type": "string",
      "defaultValue": "1"
    },
    "k-rauta-merchandise-category-api_serviceUrl": {
      "type": "string",
      "defaultValue": "https://aq8y1dy6gg.execute-api.eu-west-1.amazonaws.com"
    },
    "k-rauta-merchandise-category-api_isCurrent": {
      "type": "bool",
      "defaultValue": true
    },
    "api_k-rauta-merchandise-category-api_getCategories_backendurl": {
      "type": "string",
      "defaultValue": "https://aq8y1dy6gg.execute-api.eu-west-1.amazonaws.com"
    },
    "api_samistestapi_name": {
      "type": "string",
      "defaultValue": "samistestapi"
    },
    "samistestapi_apiRevision": {
      "type": "string",
      "defaultValue": "1"
    },
    "samistestapi_serviceUrl": {
      "type": "string",
      "defaultValue": "https://dev-apim-kcloud-apim.azure-api.net/stest"
    },
    "samistestapi_isCurrent": {
      "type": "bool",
      "defaultValue": true
    },
    "api_testiapi_name": {
      "type": "string",
      "defaultValue": "testiapi"
    },
    "testiapi_apiRevision": {
      "type": "string",
      "defaultValue": "1"
    },
    "testiapi_isCurrent": {
      "type": "bool",
      "defaultValue": true
    },
    "api_updatedb_name": {
      "type": "string",
      "defaultValue": "updatedb"
    },
    "updatedb_apiRevision": {
      "type": "string",
      "defaultValue": "1"
    },
    "updatedb_serviceUrl": {
      "type": "string",
      "defaultValue": "https://flow1.azure-api.net/testing"
    },
    "updatedb_isCurrent": {
      "type": "bool",
      "defaultValue": true
    },
    "api_updatedb_recieve-resource_backendurl": {
      "type": "string",
      "defaultValue": "https://api.openweathermap.org/data/2.5/forecast?id=7731911&APPID=885cfe0f5744189fea072db8ec4f4093"
    },
    "product_k-rauta-merchendise_name": {
      "type": "string",
      "defaultValue": "k-rauta-merchendise"
    },
    "product_starter_name": {
      "type": "string",
      "defaultValue": "starter"
    },
    "product_unlimited_name": {
      "type": "string",
      "defaultValue": "unlimited"
    }
  },
  "variables": {},
  "resources": [
    {
      "comments": "Generated for resource /subscriptions/65477ea4-4648-4f81-a455-e3621372e6b9/resourceGroups/dev-apim-kcloud-rg/providers/Microsoft.ApiManagement/service/dev-apim-kcloud-apim/apis/echo-api",
      "type": "Microsoft.ApiManagement/service/apis",
      "name": "[concat(parameters('service_dev-apim-kcloud-apim_name'), '/' ,parameters('api_echo-api_name'))]",
      "apiVersion": "2017-03-01",
      "properties": {
        "displayName": "Echo API",
        "apiRevision": "[parameters('echo-api_apiRevision')]",
        "description": null,
        "serviceUrl": "[parameters('echo-api_serviceUrl')]",
        "path": "echo",
        "protocols": [
          "https"
        ],
        "authenticationSettings": {
          "oAuth2": null,
          "openid": null
        },
        "subscriptionKeyParameterNames": {
          "header": "Ocp-Apim-Subscription-Key",
          "query": "subscription-key"
        },
        "isCurrent": "[parameters('echo-api_isCurrent')]"
      },
      "resources": [
        {
          "comments": "Generated for resource /subscriptions/65477ea4-4648-4f81-a455-e3621372e6b9/resourceGroups/dev-apim-kcloud-rg/providers/Microsoft.ApiManagement/service/dev-apim-kcloud-apim/apis/echo-api/operations/create-resource",
          "type": "Microsoft.ApiManagement/service/apis/operations",
          "name": "[concat(parameters('service_dev-apim-kcloud-apim_name'), '/', parameters('api_echo-api_name'), '/', 'create-resource')]",
          "apiVersion": "2017-03-01",
          "properties": {
            "displayName": "Create resource",
            "method": "POST",
            "urlTemplate": "/resource",
            "templateParameters": [],
            "description": "A demonstration of a POST call based on the echo backend above. The request body is expected to contain JSON-formatted data (see example below). A policy is used to automatically transform any request sent in JSON directly to XML. In a real-world scenario this could be used to enable modern clients to speak to a legacy backend.",
            "request": {
              "queryParameters": [],
              "headers": [],
              "representations": [
                {
                  "contentType": "application/json",
                  "sample": "{\r\n\t\"vehicleType\": \"train\",\r\n\t\"maxSpeed\": 125,\r\n\t\"avgSpeed\": 90,\r\n\t\"speedUnit\": \"mph\"\r\n}"
                }
              ]
            },
            "responses": [
              {
                "statusCode": 200,
                "representations": [],
                "headers": []
              }
            ],
            "policies": null
          },
          "resources": [
            {
              "comments": "Generated for resource /subscriptions/65477ea4-4648-4f81-a455-e3621372e6b9/resourceGroups/dev-apim-kcloud-rg/providers/Microsoft.ApiManagement/service/dev-apim-kcloud-apim/apis/echo-api/operations/create-resource/policies/policy",
              "type": "Microsoft.ApiManagement/service/apis/operations/policies",
              "name": "[concat(parameters('service_dev-apim-kcloud-apim_name'), '/', parameters('api_echo-api_name'), '/', 'create-resource', '/', 'policy')]",
              "apiVersion": "2017-03-01",
              "properties": {
                "policyContent": "<policies>\r\n  <inbound>\r\n    <base />\r\n    <json-to-xml apply=\"always\" consider-accept-header=\"false\" />\r\n  </inbound>\r\n  <backend>\r\n    <base />\r\n  </backend>\r\n  <outbound>\r\n    <base />\r\n  </outbound>\r\n</policies>"
              },
              "resources": [],
              "dependsOn": [
                "[resourceId('Microsoft.ApiManagement/service/apis', parameters('service_dev-apim-kcloud-apim_name') , parameters('api_echo-api_name'))]",
                "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('service_dev-apim-kcloud-apim_name'), parameters('api_echo-api_name'), 'create-resource')]"
              ]
            }
          ],
          "dependsOn": [
            "[resourceId('Microsoft.ApiManagement/service/apis', parameters('service_dev-apim-kcloud-apim_name'),parameters('api_echo-api_name'))]"
          ]
        },
        {
          "comments": "Generated for resource /subscriptions/65477ea4-4648-4f81-a455-e3621372e6b9/resourceGroups/dev-apim-kcloud-rg/providers/Microsoft.ApiManagement/service/dev-apim-kcloud-apim/apis/echo-api/operations/modify-resource",
          "type": "Microsoft.ApiManagement/service/apis/operations",
          "name": "[concat(parameters('service_dev-apim-kcloud-apim_name'), '/', parameters('api_echo-api_name'), '/', 'modify-resource')]",
          "apiVersion": "2017-03-01",
          "properties": {
            "displayName": "Modify Resource",
            "method": "PUT",
            "urlTemplate": "/resource",
            "templateParameters": [],
            "description": "A demonstration of a PUT call handled by the same \"echo\" backend as above. You can now specify a request body in addition to headers and it will be returned as well.",
            "request": {
              "queryParameters": [],
              "headers": [],
              "representations": []
            },
            "responses": [
              {
                "statusCode": 200,
                "representations": [],
                "headers": []
              }
            ],
            "policies": null
          },
          "resources": [],
          "dependsOn": [
            "[resourceId('Microsoft.ApiManagement/service/apis', parameters('service_dev-apim-kcloud-apim_name'),parameters('api_echo-api_name'))]"
          ]
        },
        {
          "comments": "Generated for resource /subscriptions/65477ea4-4648-4f81-a455-e3621372e6b9/resourceGroups/dev-apim-kcloud-rg/providers/Microsoft.ApiManagement/service/dev-apim-kcloud-apim/apis/echo-api/operations/remove-resource",
          "type": "Microsoft.ApiManagement/service/apis/operations",
          "name": "[concat(parameters('service_dev-apim-kcloud-apim_name'), '/', parameters('api_echo-api_name'), '/', 'remove-resource')]",
          "apiVersion": "2017-03-01",
          "properties": {
            "displayName": "Remove resource",
            "method": "DELETE",
            "urlTemplate": "/resource",
            "templateParameters": [],
            "description": "A demonstration of a DELETE call which traditionally deletes the resource. It is based on the same \"echo\" backend as in all other operations so nothing is actually deleted.",
            "request": {
              "queryParameters": [],
              "headers": [],
              "representations": []
            },
            "responses": [
              {
                "statusCode": 200,
                "representations": [],
                "headers": []
              }
            ],
            "policies": null
          },
          "resources": [],
          "dependsOn": [
            "[resourceId('Microsoft.ApiManagement/service/apis', parameters('service_dev-apim-kcloud-apim_name'),parameters('api_echo-api_name'))]"
          ]
        },
        {
          "comments": "Generated for resource /subscriptions/65477ea4-4648-4f81-a455-e3621372e6b9/resourceGroups/dev-apim-kcloud-rg/providers/Microsoft.ApiManagement/service/dev-apim-kcloud-apim/apis/echo-api/operations/retrieve-header-only",
          "type": "Microsoft.ApiManagement/service/apis/operations",
          "name": "[concat(parameters('service_dev-apim-kcloud-apim_name'), '/', parameters('api_echo-api_name'), '/', 'retrieve-header-only')]",
          "apiVersion": "2017-03-01",
          "properties": {
            "displayName": "Retrieve header only",
            "method": "HEAD",
            "urlTemplate": "/resource",
            "templateParameters": [],
            "description": "The HEAD operation returns only headers. In this demonstration a policy is used to set additional headers when the response is returned and to enable JSONP.",
            "request": {
              "queryParameters": [],
              "headers": [],
              "representations": []
            },
            "responses": [
              {
                "statusCode": 200,
                "representations": [],
                "headers": []
              }
            ],
            "policies": null
          },
          "resources": [
            {
              "comments": "Generated for resource /subscriptions/65477ea4-4648-4f81-a455-e3621372e6b9/resourceGroups/dev-apim-kcloud-rg/providers/Microsoft.ApiManagement/service/dev-apim-kcloud-apim/apis/echo-api/operations/retrieve-header-only/policies/policy",
              "type": "Microsoft.ApiManagement/service/apis/operations/policies",
              "name": "[concat(parameters('service_dev-apim-kcloud-apim_name'), '/', parameters('api_echo-api_name'), '/', 'retrieve-header-only', '/', 'policy')]",
              "apiVersion": "2017-03-01",
              "properties": {
                "policyContent": "<policies>\r\n  <inbound>\r\n    <base />\r\n  </inbound>\r\n  <backend>\r\n    <base />\r\n  </backend>\r\n  <outbound>\r\n    <base />\r\n    <set-header name=\"X-My-Sample\" exists-action=\"override\">\r\n      <value>This is a sample</value>\r\n      <!-- for multiple headers with the same name add additional value elements -->\r\n    </set-header>\r\n    <jsonp callback-parameter-name=\"ProcessResponse\" />\r\n  </outbound>\r\n</policies>"
              },
              "resources": [],
              "dependsOn": [
                "[resourceId('Microsoft.ApiManagement/service/apis', parameters('service_dev-apim-kcloud-apim_name') , parameters('api_echo-api_name'))]",
                "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('service_dev-apim-kcloud-apim_name'), parameters('api_echo-api_name'), 'retrieve-header-only')]"
              ]
            }
          ],
          "dependsOn": [
            "[resourceId('Microsoft.ApiManagement/service/apis', parameters('service_dev-apim-kcloud-apim_name'),parameters('api_echo-api_name'))]"
          ]
        },
        {
          "comments": "Generated for resource /subscriptions/65477ea4-4648-4f81-a455-e3621372e6b9/resourceGroups/dev-apim-kcloud-rg/providers/Microsoft.ApiManagement/service/dev-apim-kcloud-apim/apis/echo-api/operations/retrieve-resource",
          "type": "Microsoft.ApiManagement/service/apis/operations",
          "name": "[concat(parameters('service_dev-apim-kcloud-apim_name'), '/', parameters('api_echo-api_name'), '/', 'retrieve-resource')]",
          "apiVersion": "2017-03-01",
          "properties": {
            "displayName": "Retrieve resource",
            "method": "GET",
            "urlTemplate": "/resource",
            "templateParameters": [],
            "description": "A demonstration of a GET call on a sample resource. It is handled by an \"echo\" backend which returns a response equal to the request (the supplied headers and body are being returned as received).",
            "request": {
              "queryParameters": [
                {
                  "name": "param1",
                  "description": "A sample parameter that is required and has a default value of \"sample\".",
                  "type": "string",
                  "defaultValue": "sample",
                  "required": true,
                  "values": [
                    "sample"
                  ]
                },
                {
                  "name": "param2",
                  "description": "Another sample parameter, set to not required.",
                  "type": "number",
                  "values": []
                }
              ],
              "headers": [],
              "representations": []
            },
            "responses": [
              {
                "statusCode": 200,
                "description": "Returned in all cases.",
                "representations": [],
                "headers": []
              }
            ],
            "policies": null
          },
          "resources": [],
          "dependsOn": [
            "[resourceId('Microsoft.ApiManagement/service/apis', parameters('service_dev-apim-kcloud-apim_name'),parameters('api_echo-api_name'))]"
          ]
        },
        {
          "comments": "Generated for resource /subscriptions/65477ea4-4648-4f81-a455-e3621372e6b9/resourceGroups/dev-apim-kcloud-rg/providers/Microsoft.ApiManagement/service/dev-apim-kcloud-apim/apis/echo-api/operations/retrieve-resource-cached",
          "type": "Microsoft.ApiManagement/service/apis/operations",
          "name": "[concat(parameters('service_dev-apim-kcloud-apim_name'), '/', parameters('api_echo-api_name'), '/', 'retrieve-resource-cached')]",
          "apiVersion": "2017-03-01",
          "properties": {
            "displayName": "Retrieve resource (cached)",
            "method": "GET",
            "urlTemplate": "/resource-cached",
            "templateParameters": [],
            "description": "A demonstration of a GET call with caching enabled on the same \"echo\" backend as above. Cache TTL is set to 1 hour. When you make the first request the headers you supplied will be cached. Subsequent calls will return the same headers as the first time even if you change them in your request.",
            "request": {
              "queryParameters": [
                {
                  "name": "param1",
                  "description": "A sample parameter that is required and has a default value of \"sample\".",
                  "type": "string",
                  "defaultValue": "sample",
                  "required": true,
                  "values": [
                    "sample"
                  ]
                },
                {
                  "name": "param2",
                  "description": "Another sample parameter, set to not required.",
                  "type": "string",
                  "values": []
                }
              ],
              "headers": [],
              "representations": []
            },
            "responses": [
              {
                "statusCode": 200,
                "representations": [],
                "headers": []
              }
            ],
            "policies": null
          },
          "resources": [
            {
              "comments": "Generated for resource /subscriptions/65477ea4-4648-4f81-a455-e3621372e6b9/resourceGroups/dev-apim-kcloud-rg/providers/Microsoft.ApiManagement/service/dev-apim-kcloud-apim/apis/echo-api/operations/retrieve-resource-cached/policies/policy",
              "type": "Microsoft.ApiManagement/service/apis/operations/policies",
              "name": "[concat(parameters('service_dev-apim-kcloud-apim_name'), '/', parameters('api_echo-api_name'), '/', 'retrieve-resource-cached', '/', 'policy')]",
              "apiVersion": "2017-03-01",
              "properties": {
                "policyContent": "<policies>\r\n  <inbound>\r\n    <base />\r\n    <cache-lookup vary-by-developer=\"false\" vary-by-developer-groups=\"false\">\r\n      <vary-by-header>Accept</vary-by-header>\r\n      <vary-by-header>Accept-Charset</vary-by-header>\r\n    </cache-lookup>\r\n    <rewrite-uri template=\"/resource\" />\r\n  </inbound>\r\n  <backend>\r\n    <base />\r\n  </backend>\r\n  <outbound>\r\n    <base />\r\n    <cache-store duration=\"3600\" />\r\n  </outbound>\r\n</policies>"
              },
              "resources": [],
              "dependsOn": [
                "[resourceId('Microsoft.ApiManagement/service/apis', parameters('service_dev-apim-kcloud-apim_name') , parameters('api_echo-api_name'))]",
                "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('service_dev-apim-kcloud-apim_name'), parameters('api_echo-api_name'), 'retrieve-resource-cached')]"
              ]
            }
          ],
          "dependsOn": [
            "[resourceId('Microsoft.ApiManagement/service/apis', parameters('service_dev-apim-kcloud-apim_name'),parameters('api_echo-api_name'))]"
          ]
        }
      ],
      "dependsOn": []
    },
    {
      "comments": "Generated for resource /subscriptions/65477ea4-4648-4f81-a455-e3621372e6b9/resourceGroups/dev-apim-kcloud-rg/providers/Microsoft.ApiManagement/service/dev-apim-kcloud-apim/apis/k-rauta-api-warehouses-service",
      "type": "Microsoft.ApiManagement/service/apis",
      "name": "[concat(parameters('service_dev-apim-kcloud-apim_name'), '/' ,parameters('api_k-rauta-api-warehouses-service_name'))]",
      "apiVersion": "2017-03-01",
      "properties": {
        "displayName": "K-rauta API Warehouses Service",
        "apiRevision": "[parameters('k-rauta-api-warehouses-service_apiRevision')]",
        "description": null,
        "serviceUrl": "[parameters('k-rauta-api-warehouses-service_serviceUrl')]",
        "path": "api/k-rauta/warehouse-service",
        "protocols": [
          "https"
        ],
        "authenticationSettings": {
          "oAuth2": null,
          "openid": null
        },
        "subscriptionKeyParameterNames": {
          "header": "Ocp-Apim-Subscription-Key",
          "query": "subscription-key"
        },
        "isCurrent": "[parameters('k-rauta-api-warehouses-service_isCurrent')]"
      },
      "resources": [
        {
          "comments": "Generated for resource /subscriptions/65477ea4-4648-4f81-a455-e3621372e6b9/resourceGroups/dev-apim-kcloud-rg/providers/Microsoft.ApiManagement/service/dev-apim-kcloud-apim/apis/k-rauta-api-warehouses-service/operations/get-all-warehouses",
          "type": "Microsoft.ApiManagement/service/apis/operations",
          "name": "[concat(parameters('service_dev-apim-kcloud-apim_name'), '/', parameters('api_k-rauta-api-warehouses-service_name'), '/', 'get-all-warehouses')]",
          "apiVersion": "2017-03-01",
          "properties": {
            "displayName": "Get All warehouses",
            "method": "GET",
            "urlTemplate": "/warehouses",
            "templateParameters": [],
            "description": "Get all K-rauta warehouses",
            "request": {
              "queryParameters": [
                {
                  "name": "version",
                  "description": "Version of warehouses data (optional, defaults to latest)",
                  "type": "string",
                  "values": []
                }
              ],
              "headers": [],
              "representations": []
            },
            "responses": [
              {
                "statusCode": 200,
                "description": "Successful",
                "representations": [],
                "headers": []
              },
              {
                "statusCode": 400,
                "description": "Bad request, unknown version",
                "representations": [],
                "headers": []
              }
            ],
            "policies": null
          },
          "resources": [
            {
              "comments": "Generated for resource /subscriptions/65477ea4-4648-4f81-a455-e3621372e6b9/resourceGroups/dev-apim-kcloud-rg/providers/Microsoft.ApiManagement/service/dev-apim-kcloud-apim/apis/k-rauta-api-warehouses-service/operations/get-all-warehouses/policies/policy",
              "type": "Microsoft.ApiManagement/service/apis/operations/policies",
              "name": "[concat(parameters('service_dev-apim-kcloud-apim_name'), '/', parameters('api_k-rauta-api-warehouses-service_name'), '/', 'get-all-warehouses', '/', 'policy')]",
              "apiVersion": "2017-03-01",
              "properties": {
                "policyContent": "<!--\r\n    IMPORTANT:\r\n    - Policy elements can appear only within the <inbound>, <outbound>, <backend> section elements.\r\n    - To apply a policy to the incoming request (before it is forwarded to the backend service), place a corresponding policy element within the <inbound> section element.\r\n    - To apply a policy to the outgoing response (before it is sent back to the caller), place a corresponding policy element within the <outbound> section element.\r\n    - To add a policy, place the cursor at the desired insertion point and select a policy from the sidebar.\r\n    - To remove a policy, delete the corresponding policy statement from the policy document.\r\n    - Position the <base> element within a section element to inherit all policies from the corresponding section element in the enclosing scope.\r\n    - Remove the <base> element to prevent inheriting policies from the corresponding section element in the enclosing scope.\r\n    - Policies are applied in the order of their appearance, from the top down.\r\n    - Comments within policy elements are not supported and may disappear. Place your comments between policy elements or at a higher level scope.\r\n-->\r\n<policies>\r\n  <inbound>\r\n    <base />\r\n    <set-header name=\"x-gw-secret\" exists-action=\"append\">\r\n      <value>tk1pQTYcHGxrCUmFCcSGDriQU6s4hRkj</value>\r\n    </set-header>\r\n  </inbound>\r\n  <backend>\r\n    <base />\r\n  </backend>\r\n  <outbound>\r\n    <base />\r\n  </outbound>\r\n  <on-error>\r\n    <base />\r\n  </on-error>\r\n</policies>"
              },
              "resources": [],
              "dependsOn": [
                "[resourceId('Microsoft.ApiManagement/service/apis', parameters('service_dev-apim-kcloud-apim_name') , parameters('api_k-rauta-api-warehouses-service_name'))]",
                "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('service_dev-apim-kcloud-apim_name'), parameters('api_k-rauta-api-warehouses-service_name'), 'get-all-warehouses')]"
              ]
            }
          ],
          "dependsOn": [
            "[resourceId('Microsoft.ApiManagement/service/apis', parameters('service_dev-apim-kcloud-apim_name'),parameters('api_k-rauta-api-warehouses-service_name'))]"
          ]
        }
      ],
      "dependsOn": []
    },
    {
      "comments": "Generated for resource /subscriptions/65477ea4-4648-4f81-a455-e3621372e6b9/resourceGroups/dev-apim-kcloud-rg/providers/Microsoft.ApiManagement/service/dev-apim-kcloud-apim/apis/k-rauta-consumption-api",
      "type": "Microsoft.ApiManagement/service/apis",
      "name": "[concat(parameters('service_dev-apim-kcloud-apim_name'), '/' ,parameters('api_k-rauta-consumption-api_name'))]",
      "apiVersion": "2017-03-01",
      "properties": {
        "displayName": "K-rauta Consumption API",
        "apiRevision": "[parameters('k-rauta-consumption-api_apiRevision')]",
        "description": null,
        "serviceUrl": null,
        "path": "consumption",
        "protocols": [
          "https"
        ],
        "authenticationSettings": {
          "oAuth2": null,
          "openid": null
        },
        "subscriptionKeyParameterNames": {
          "header": "Ocp-Apim-Subscription-Key",
          "query": "subscription-key"
        },
        "isCurrent": "[parameters('k-rauta-consumption-api_isCurrent')]"
      },
      "resources": [
        {
          "comments": "Generated for resource /subscriptions/65477ea4-4648-4f81-a455-e3621372e6b9/resourceGroups/dev-apim-kcloud-rg/providers/Microsoft.ApiManagement/service/dev-apim-kcloud-apim/apis/k-rauta-consumption-api/operations/postConsumptionActionsCalculate",
          "type": "Microsoft.ApiManagement/service/apis/operations",
          "name": "[concat(parameters('service_dev-apim-kcloud-apim_name'), '/', parameters('api_k-rauta-consumption-api_name'), '/', 'postConsumptionActionsCalculate')]",
          "apiVersion": "2017-03-01",
          "properties": {
            "displayName": "postConsumptionActionsCalculate",
            "method": "POST",
            "urlTemplate": "/actions/calculate",
            "templateParameters": [],
            "description": "postConsumptionActionsCalculate",
            "request": {
              "queryParameters": [],
              "headers": [
                {
                  "name": "authorization",
                  "description": "Authorization header",
                  "type": "string",
                  "values": []
                }
              ],
              "representations": [
                {
                  "contentType": "application/json",
                  "schemaId": "5bf699fded7d2811743afeb7",
                  "typeName": "CalculationRequest"
                }
              ]
            },
            "responses": [
              {
                "statusCode": 200,
                "description": "Successful",
                "representations": [
                  {
                    "contentType": "application/json",
                    "schemaId": "5bf699fded7d2811743afeb7",
                    "typeName": "CalculationResponse",
                    "generatedSample": "{\r\n  \"totalPrice\": {\r\n    \"storeId\": \"F500\",\r\n    \"chain\": {\r\n      \"id\": \"51\",\r\n      \"country\": \"FIN\"\r\n    },\r\n    \"agreementId\": \"string\",\r\n    \"price\": 0.0,\r\n    \"basePrice\": 0.0,\r\n    \"discount\": 0.0,\r\n    \"discountType\": \"string\",\r\n    \"qualifier\": \"string\",\r\n    \"currency\": \"EUR\",\r\n    \"vatPercent\": 0.0\r\n  },\r\n  \"products\": [\r\n    {\r\n      \"ean\": \"4000441743722\",\r\n      \"amount\": {\r\n        \"value\": 53,\r\n        \"unit\": \"cm\"\r\n      },\r\n      \"assurance\": 1.1,\r\n      \"quantity\": 2,\r\n      \"efficiency\": 0.9,\r\n      \"usage\": 0.6,\r\n      \"totalPrice\": {\r\n        \"storeId\": \"F500\",\r\n        \"chain\": {\r\n          \"id\": \"51\",\r\n          \"country\": \"FIN\"\r\n        },\r\n        \"agreementId\": \"string\",\r\n        \"price\": 0.0,\r\n        \"basePrice\": 0.0,\r\n        \"discount\": 0.0,\r\n        \"discountType\": \"string\",\r\n        \"qualifier\": \"string\",\r\n        \"currency\": \"EUR\",\r\n        \"vatPercent\": 0.0\r\n      }\r\n    }\r\n  ],\r\n  \"surfaces\": [\r\n    {\r\n      \"id\": \"my-wall\",\r\n      \"products\": [\r\n        {\r\n          \"ean\": \"4000441743722\",\r\n          \"efficiency\": 0.9,\r\n          \"amount\": {\r\n            \"value\": 53,\r\n            \"unit\": \"cm\"\r\n          }\r\n        }\r\n      ]\r\n    }\r\n  ]\r\n}"
                  }
                ],
                "headers": []
              }
            ],
            "policies": null
          },
          "resources": [
            {
              "comments": "Generated for resource /subscriptions/65477ea4-4648-4f81-a455-e3621372e6b9/resourceGroups/dev-apim-kcloud-rg/providers/Microsoft.ApiManagement/service/dev-apim-kcloud-apim/apis/k-rauta-consumption-api/operations/postConsumptionActionsCalculate/policies/policy",
              "type": "Microsoft.ApiManagement/service/apis/operations/policies",
              "name": "[concat(parameters('service_dev-apim-kcloud-apim_name'), '/', parameters('api_k-rauta-consumption-api_name'), '/', 'postConsumptionActionsCalculate', '/', 'policy')]",
              "apiVersion": "2017-03-01",
              "properties": {
                "policyContent": "[Concat('<!--\r\n    IMPORTANT:\r\n    - Policy elements can appear only within the <inbound>, <outbound>, <backend> section elements.\r\n    - To apply a policy to the incoming request (before it is forwarded to the backend service), place a corresponding policy element within the <inbound> section element.\r\n    - To apply a policy to the outgoing response (before it is sent back to the caller), place a corresponding policy element within the <outbound> section element.\r\n    - To add a policy, place the cursor at the desired insertion point and select a policy from the sidebar.\r\n    - To remove a policy, delete the corresponding policy statement from the policy document.\r\n    - Position the <base> element within a section element to inherit all policies from the corresponding section element in the enclosing scope.\r\n    - Remove the <base> element to prevent inheriting policies from the corresponding section element in the enclosing scope.\r\n    - Policies are applied in the order of their appearance, from the top down.\r\n    - Comments within policy elements are not supported and may disappear. Place your comments between policy elements or at a higher level scope.\r\n-->\r\n<policies>\r\n  <inbound>\r\n    <base />\r\n    <set-backend-service base-url=\"',parameters('api_k-rauta-consumption-api_postConsumptionActionsCalculate_backendurl'),'\" />\r\n  </inbound>\r\n  <backend>\r\n    <base />\r\n  </backend>\r\n  <outbound>\r\n    <base />\r\n  </outbound>\r\n  <on-error>\r\n    <base />\r\n  </on-error>\r\n</policies>')]"
              },
              "resources": [],
              "dependsOn": [
                "[resourceId('Microsoft.ApiManagement/service/apis', parameters('service_dev-apim-kcloud-apim_name') , parameters('api_k-rauta-consumption-api_name'))]",
                "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('service_dev-apim-kcloud-apim_name'), parameters('api_k-rauta-consumption-api_name'), 'postConsumptionActionsCalculate')]"
              ]
            }
          ],
          "dependsOn": [
            "[resourceId('Microsoft.ApiManagement/service/apis/schemas', parameters('service_dev-apim-kcloud-apim_name'),parameters('api_k-rauta-consumption-api_name'),'5bf699fded7d2811743afeb7')]",
            "[resourceId('Microsoft.ApiManagement/service/apis', parameters('service_dev-apim-kcloud-apim_name'),parameters('api_k-rauta-consumption-api_name'))]"
          ]
        },
        {
          "comments": "Generated for resource /subscriptions/65477ea4-4648-4f81-a455-e3621372e6b9/resourceGroups/dev-apim-kcloud-rg/providers/Microsoft.ApiManagement/service/dev-apim-kcloud-apim/apis/k-rauta-consumption-api/policies/policy",
          "type": "Microsoft.ApiManagement/service/apis/policies",
          "name": "[concat(parameters('service_dev-apim-kcloud-apim_name'), '/', parameters('api_k-rauta-consumption-api_name'), '/', 'policy')]",
          "apiVersion": "2017-03-01",
          "properties": {
            "policyContent": "<!--\r\n    IMPORTANT:\r\n    - Policy elements can appear only within the <inbound>, <outbound>, <backend> section elements.\r\n    - To apply a policy to the incoming request (before it is forwarded to the backend service), place a corresponding policy element within the <inbound> section element.\r\n    - To apply a policy to the outgoing response (before it is sent back to the caller), place a corresponding policy element within the <outbound> section element.\r\n    - To add a policy, place the cursor at the desired insertion point and select a policy from the sidebar.\r\n    - To remove a policy, delete the corresponding policy statement from the policy document.\r\n    - Position the <base> element within a section element to inherit all policies from the corresponding section element in the enclosing scope.\r\n    - Remove the <base> element to prevent inheriting policies from the corresponding section element in the enclosing scope.\r\n    - Policies are applied in the order of their appearance, from the top down.\r\n    - Comments within policy elements are not supported and may disappear. Place your comments between policy elements or at a higher level scope.\r\n-->\r\n<policies>\r\n  <inbound>\r\n    <base />\r\n    <set-backend-service base-url=\"https://k-rauta-api-consumption-dev.herokuapp.com\" />\r\n  </inbound>\r\n  <backend>\r\n    <base />\r\n  </backend>\r\n  <outbound>\r\n    <base />\r\n  </outbound>\r\n  <on-error>\r\n    <base />\r\n  </on-error>\r\n</policies>"
          },
          "resources": [],
          "dependsOn": [
            "[resourceId('Microsoft.ApiManagement/service/apis', parameters('service_dev-apim-kcloud-apim_name') , parameters('api_k-rauta-consumption-api_name'))]"
          ]
        },
        {
          "comments": "Generated for resource /subscriptions/65477ea4-4648-4f81-a455-e3621372e6b9/resourceGroups/dev-apim-kcloud-rg/providers/Microsoft.ApiManagement/service/dev-apim-kcloud-apim/apis/k-rauta-consumption-api/schemas/5bf699fded7d2811743afeb7",
          "type": "Microsoft.ApiManagement/service/apis/schemas",
          "name": "[concat(parameters('service_dev-apim-kcloud-apim_name'),'/',parameters('api_k-rauta-consumption-api_name'), '/5bf699fded7d2811743afeb7')]",
          "apiVersion": "2017-03-01",
          "properties": {
            "contentType": "application/vnd.ms-azure-apim.swagger.definitions+json",
            "document": {
              "definitions": {
                "Chain": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "description": "Chain ID",
                      "example": "51"
                    },
                    "country": {
                      "type": "string",
                      "description": "Chain country",
                      "example": "FIN",
                      "enum": [
                        "FIN",
                        "SWE",
                        "RUS",
                        "EE"
                      ]
                    }
                  }
                },
                "StoreIDs": {
                  "type": "array",
                  "description": "Store IDs used as a filter in price search",
                  "example": [
                    "F500"
                  ],
                  "minItems": 1,
                  "items": {
                    "type": "string"
                  }
                },
                "AgreementIDs": {
                  "type": "array",
                  "description": "Agreement IDs used as a filter in price search",
                  "minItems": 1,
                  "items": {
                    "type": "string"
                  }
                },
                "RequestProduct": {
                  "type": "object",
                  "properties": {
                    "ean": {
                      "type": "string",
                      "description": "Product EAN",
                      "example": "4000441743722"
                    }
                  },
                  "required": [
                    "ean"
                  ]
                },
                "RequestProducts": {
                  "type": "array",
                  "description": "Products to be applied on the surface",
                  "minItems": 1,
                  "maxItems": 10,
                  "items": {
                    "$ref": "#/definitions/RequestProduct",
                    "type": "object"
                  }
                },
                "Hole": {
                  "type": "object",
                  "properties": {
                    "x": {
                      "type": "integer",
                      "description": "Hole X coordinate from left to right (mm)",
                      "example": 1000,
                      "minimum": 0
                    },
                    "y": {
                      "type": "integer",
                      "description": "Hole Y coordinate from top to bottom (mm)",
                      "example": 200,
                      "minimum": 0
                    },
                    "width": {
                      "type": "integer",
                      "description": "Hole width (mm)",
                      "example": 900,
                      "minimum": 1
                    },
                    "height": {
                      "type": "integer",
                      "description": "Hole height (mm)",
                      "example": 2000,
                      "minimum": 1
                    }
                  },
                  "required": [
                    "x",
                    "y",
                    "width",
                    "height"
                  ]
                },
                "Holes": {
                  "type": "array",
                  "description": "Holes in the surface",
                  "maxItems": 10,
                  "items": {
                    "$ref": "#/definitions/Hole",
                    "type": "object"
                  }
                },
                "Surface measurements": {
                  "type": "object",
                  "description": "Surface measurements",
                  "properties": {
                    "width": {
                      "type": "integer",
                      "description": "Surface width (mm)",
                      "example": 4000,
                      "minimum": 1,
                      "maximum": 100000
                    },
                    "height": {
                      "type": "integer",
                      "description": "Surface height (mm)",
                      "example": 2200,
                      "minimum": 1,
                      "maximum": 100000
                    },
                    "area": {
                      "type": "number",
                      "description": "Surface area (m2)",
                      "example": 8.8,
                      "minimum": 0,
                      "maximum": 10000
                    },
                    "holes": {
                      "$ref": "#/definitions/Holes",
                      "type": "array"
                    }
                  }
                },
                "RequestSurface": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "description": "Surface identifier for identification in calculation response",
                      "example": "0"
                    },
                    "products": {
                      "$ref": "#/definitions/RequestProducts",
                      "type": "array"
                    },
                    "measurements": {
                      "$ref": "#/definitions/Surface measurements",
                      "type": "object"
                    }
                  },
                  "required": [
                    "id",
                    "products",
                    "measurements"
                  ]
                },
                "RequestSurfaces": {
                  "type": "array",
                  "description": "Surfaces for the calculation",
                  "minItems": 1,
                  "maxItems": 10,
                  "items": {
                    "$ref": "#/definitions/RequestSurface",
                    "type": "object"
                  }
                },
                "CalculationRequest": {
                  "type": "object",
                  "properties": {
                    "chain": {
                      "$ref": "#/definitions/Chain",
                      "type": "object"
                    },
                    "storeIds": {
                      "$ref": "#/definitions/StoreIDs",
                      "type": "array"
                    },
                    "agreementIds": {
                      "$ref": "#/definitions/AgreementIDs",
                      "type": "array"
                    },
                    "surfaces": {
                      "$ref": "#/definitions/RequestSurfaces",
                      "type": "array"
                    }
                  },
                  "required": [
                    "surfaces"
                  ]
                },
                "TotalProductPrice": {
                  "type": "object",
                  "description": "Total price of all product items needed for all requested surfaces",
                  "properties": {
                    "storeId": {
                      "type": "string",
                      "description": "Store ID",
                      "example": "F500"
                    },
                    "chain": {
                      "$ref": "#/definitions/Chain",
                      "type": "object"
                    },
                    "agreementId": {
                      "type": "string",
                      "description": "Agreement ID"
                    },
                    "price": {
                      "type": "number",
                      "description": "Price (with discounts)"
                    },
                    "basePrice": {
                      "type": "number",
                      "description": "Base price (without discounts)"
                    },
                    "discount": {
                      "type": "number",
                      "description": "Discount value"
                    },
                    "discountType": {
                      "type": "string",
                      "description": "Discount type"
                    },
                    "qualifier": {
                      "type": "string",
                      "description": "Discount qualifier"
                    },
                    "currency": {
                      "type": "string",
                      "description": "Currency",
                      "example": "EUR",
                      "enum": [
                        "EUR",
                        "GBP",
                        "SEK",
                        "RUB"
                      ]
                    },
                    "vatPercent": {
                      "type": "number",
                      "description": "VAT percent",
                      "minimum": 0,
                      "maximum": 100
                    }
                  },
                  "required": [
                    "price",
                    "basePrice",
                    "currency",
                    "vatPercent"
                  ]
                },
                "TotalProductAmount": {
                  "type": "object",
                  "description": "Amount of material needed for all surfaces",
                  "properties": {
                    "value": {
                      "type": "number",
                      "description": "Value (includes assurance factor)",
                      "example": 53,
                      "minimum": 0
                    },
                    "unit": {
                      "type": "string",
                      "description": "Value unit",
                      "example": "cm",
                      "enum": [
                        "mm",
                        "cm",
                        "m",
                        "mm2",
                        "cm2",
                        "m2"
                      ]
                    }
                  },
                  "required": [
                    "value",
                    "unit"
                  ]
                },
                "TotalPrice": {
                  "type": "object",
                  "description": "Total price of product items needed",
                  "properties": {
                    "storeId": {
                      "type": "string",
                      "description": "Store ID",
                      "example": "F500"
                    },
                    "chain": {
                      "$ref": "#/definitions/Chain",
                      "type": "object"
                    },
                    "agreementId": {
                      "type": "string",
                      "description": "Agreement ID"
                    },
                    "price": {
                      "type": "number",
                      "description": "Price (with discounts)"
                    },
                    "basePrice": {
                      "type": "number",
                      "description": "Base price (without discounts)"
                    },
                    "discount": {
                      "type": "number",
                      "description": "Discount value"
                    },
                    "discountType": {
                      "type": "string",
                      "description": "Discount type"
                    },
                    "qualifier": {
                      "type": "string",
                      "description": "Discount qualifier"
                    },
                    "currency": {
                      "type": "string",
                      "description": "Currency",
                      "example": "EUR",
                      "enum": [
                        "EUR",
                        "GBP",
                        "SEK",
                        "RUB"
                      ]
                    },
                    "vatPercent": {
                      "type": "number",
                      "description": "VAT percent",
                      "minimum": 0,
                      "maximum": 100
                    }
                  },
                  "required": [
                    "price",
                    "basePrice",
                    "currency",
                    "vatPercent"
                  ]
                },
                "ResponseTotalProduct": {
                  "type": "object",
                  "properties": {
                    "ean": {
                      "type": "string",
                      "description": "Product EAN",
                      "example": "4000441743722"
                    },
                    "amount": {
                      "$ref": "#/definitions/TotalProductAmount",
                      "type": "object"
                    },
                    "assurance": {
                      "type": "number",
                      "description": "Assurance factor used in consumption calculation",
                      "example": 1.1,
                      "minimum": 1
                    },
                    "quantity": {
                      "type": "integer",
                      "description": "Number of product items needed (includes assurance factor)",
                      "example": 2,
                      "minimum": 0
                    },
                    "efficiency": {
                      "type": "number",
                      "description": "Efficiency of material usage (without assurance factor)",
                      "example": 0.9,
                      "minimum": 0,
                      "maximum": 1
                    },
                    "usage": {
                      "type": "number",
                      "description": "Percent of material used (includes assurance factor)",
                      "example": 0.6,
                      "minimum": 0,
                      "maximum": 1
                    },
                    "totalPrice": {
                      "$ref": "#/definitions/TotalPrice",
                      "type": "object"
                    }
                  },
                  "required": [
                    "ean",
                    "assurance",
                    "quantity",
                    "usage"
                  ]
                },
                "ResponseTotalProducts": {
                  "type": "array",
                  "description": "Products needed for all surfaces combined",
                  "items": {
                    "$ref": "#/definitions/ResponseTotalProduct",
                    "type": "object"
                  }
                },
                "SurfaceProductAmount": {
                  "type": "object",
                  "description": "Amount of material needed for this surface",
                  "properties": {
                    "value": {
                      "type": "number",
                      "description": "Value (includes assurance factor)",
                      "example": 53,
                      "minimum": 0
                    },
                    "unit": {
                      "type": "string",
                      "description": "Value unit",
                      "example": "cm",
                      "enum": [
                        "mm",
                        "cm",
                        "m",
                        "mm2",
                        "cm2",
                        "m2"
                      ]
                    }
                  },
                  "required": [
                    "value",
                    "unit"
                  ]
                },
                "ResponseSurfaceProduct": {
                  "type": "object",
                  "properties": {
                    "ean": {
                      "type": "string",
                      "description": "Product EAN",
                      "example": "4000441743722"
                    },
                    "efficiency": {
                      "type": "number",
                      "description": "Efficiency of material usage (without assurance factor)",
                      "example": 0.9,
                      "minimum": 0,
                      "maximum": 1
                    },
                    "amount": {
                      "$ref": "#/definitions/SurfaceProductAmount",
                      "type": "object"
                    }
                  },
                  "required": [
                    "ean"
                  ]
                },
                "ResponseSurfaceProducts": {
                  "type": "array",
                  "description": "Products needed to fulfill the calculation request",
                  "items": {
                    "$ref": "#/definitions/ResponseSurfaceProduct",
                    "type": "object"
                  }
                },
                "ResponseSurface": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "description": "Surface identifier from the calculation request",
                      "example": "my-wall"
                    },
                    "products": {
                      "$ref": "#/definitions/ResponseSurfaceProducts",
                      "type": "array"
                    }
                  },
                  "required": [
                    "id",
                    "products"
                  ]
                },
                "ResponseSurfaces": {
                  "type": "array",
                  "description": "Calculation results for surfaces",
                  "items": {
                    "$ref": "#/definitions/ResponseSurface",
                    "type": "object"
                  }
                },
                "CalculationResponse": {
                  "type": "object",
                  "properties": {
                    "totalPrice": {
                      "$ref": "#/definitions/TotalProductPrice",
                      "type": "object"
                    },
                    "products": {
                      "$ref": "#/definitions/ResponseTotalProducts",
                      "type": "array"
                    },
                    "surfaces": {
                      "$ref": "#/definitions/ResponseSurfaces",
                      "type": "array"
                    }
                  },
                  "required": [
                    "products",
                    "surfaces"
                  ]
                }
              }
            }
          },
          "resources": [],
          "dependsOn": [
            "[resourceId('Microsoft.ApiManagement/service/apis', parameters('service_dev-apim-kcloud-apim_name'),parameters('api_k-rauta-consumption-api_name'))]"
          ]
        }
      ],
      "dependsOn": []
    },
    {
      "comments": "Generated for resource /subscriptions/65477ea4-4648-4f81-a455-e3621372e6b9/resourceGroups/dev-apim-kcloud-rg/providers/Microsoft.ApiManagement/service/dev-apim-kcloud-apim/apis/k-rauta-geo",
      "type": "Microsoft.ApiManagement/service/apis",
      "name": "[concat(parameters('service_dev-apim-kcloud-apim_name'), '/' ,parameters('api_k-rauta-geo_name'))]",
      "apiVersion": "2017-03-01",
      "properties": {
        "displayName": "K-Rauta Geo",
        "apiRevision": "[parameters('k-rauta-geo_apiRevision')]",
        "description": null,
        "serviceUrl": null,
        "path": "geo",
        "protocols": [
          "https"
        ],
        "authenticationSettings": {
          "oAuth2": null,
          "openid": null
        },
        "subscriptionKeyParameterNames": {
          "header": "Ocp-Apim-Subscription-Key",
          "query": "subscription-key"
        },
        "isCurrent": "[parameters('k-rauta-geo_isCurrent')]"
      },
      "resources": [
        {
          "comments": "Generated for resource /subscriptions/65477ea4-4648-4f81-a455-e3621372e6b9/resourceGroups/dev-apim-kcloud-rg/providers/Microsoft.ApiManagement/service/dev-apim-kcloud-apim/apis/k-rauta-geo/operations/getGeocode",
          "type": "Microsoft.ApiManagement/service/apis/operations",
          "name": "[concat(parameters('service_dev-apim-kcloud-apim_name'), '/', parameters('api_k-rauta-geo_name'), '/', 'getGeocode')]",
          "apiVersion": "2017-03-01",
          "properties": {
            "displayName": "Get WGS84 coordinates based on a search string",
            "method": "GET",
            "urlTemplate": "/geocode/?query={query}",
            "templateParameters": [
              {
                "name": "query",
                "description": "The search parameter string",
                "type": "string",
                "required": true,
                "values": []
              }
            ],
            "description": "Get WGS84 coordinates based on a search string",
            "request": {
              "queryParameters": [],
              "headers": [
                {
                  "name": "x-performance-test-mode",
                  "description": "Enable performance test mode which doesn't request the live\n    gmaps API endpoint and returns a dummy response to avoid excessive requests\n    to Google's APIs.",
                  "type": "string",
                  "values": [
                    "true",
                    "false"
                  ]
                }
              ],
              "representations": []
            },
            "responses": [
              {
                "statusCode": 200,
                "description": "OK",
                "representations": [
                  {
                    "contentType": "application/json",
                    "schemaId": "5bebe1baed7d2811743afe0f",
                    "typeName": "SearchResponse",
                    "generatedSample": "{\r\n  \"coordinates\": {\r\n    \"lat\": 61.4977524,\r\n    \"lng\": 23.7609535\r\n  },\r\n  \"address\": {\r\n    \"postalCode\": \"string\",\r\n    \"city\": \"string\",\r\n    \"country\": \"string\"\r\n  },\r\n  \"type\": \"geocode\",\r\n  \"locationType\": \"PRECISE\"\r\n}"
                  }
                ],
                "headers": []
              }
            ],
            "policies": null
          },
          "resources": [
            {
              "comments": "Generated for resource /subscriptions/65477ea4-4648-4f81-a455-e3621372e6b9/resourceGroups/dev-apim-kcloud-rg/providers/Microsoft.ApiManagement/service/dev-apim-kcloud-apim/apis/k-rauta-geo/operations/getGeocode/policies/policy",
              "type": "Microsoft.ApiManagement/service/apis/operations/policies",
              "name": "[concat(parameters('service_dev-apim-kcloud-apim_name'), '/', parameters('api_k-rauta-geo_name'), '/', 'getGeocode', '/', 'policy')]",
              "apiVersion": "2017-03-01",
              "properties": {
                "policyContent": "[Concat('<!--\r\n    IMPORTANT:\r\n    - Policy elements can appear only within the <inbound>, <outbound>, <backend> section elements.\r\n    - To apply a policy to the incoming request (before it is forwarded to the backend service), place a corresponding policy element within the <inbound> section element.\r\n    - To apply a policy to the outgoing response (before it is sent back to the caller), place a corresponding policy element within the <outbound> section element.\r\n    - To add a policy, place the cursor at the desired insertion point and select a policy from the sidebar.\r\n    - To remove a policy, delete the corresponding policy statement from the policy document.\r\n    - Position the <base> element within a section element to inherit all policies from the corresponding section element in the enclosing scope.\r\n    - Remove the <base> element to prevent inheriting policies from the corresponding section element in the enclosing scope.\r\n    - Policies are applied in the order of their appearance, from the top down.\r\n    - Comments within policy elements are not supported and may disappear. Place your comments between policy elements or at a higher level scope.\r\n-->\r\n<policies>\r\n  <inbound>\r\n    <base />\r\n    <set-header name=\"x-gw-secret\" exists-action=\"override\">\r\n      <value>QQsfDQxDk6Y8eh0MbMXYtFb8zAHcmzJm</value>\r\n    </set-header>\r\n    <set-backend-service base-url=\"',parameters('api_k-rauta-geo_getGeocode_backendurl'),'\" />\r\n  </inbound>\r\n  <backend>\r\n    <base />\r\n  </backend>\r\n  <outbound>\r\n    <base />\r\n  </outbound>\r\n  <on-error>\r\n    <base />\r\n  </on-error>\r\n</policies>')]"
              },
              "resources": [],
              "dependsOn": [
                "[resourceId('Microsoft.ApiManagement/service/apis', parameters('service_dev-apim-kcloud-apim_name') , parameters('api_k-rauta-geo_name'))]",
                "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('service_dev-apim-kcloud-apim_name'), parameters('api_k-rauta-geo_name'), 'getGeocode')]"
              ]
            }
          ],
          "dependsOn": [
            "[resourceId('Microsoft.ApiManagement/service/apis/schemas', parameters('service_dev-apim-kcloud-apim_name'),parameters('api_k-rauta-geo_name'),'5bebe1baed7d2811743afe0f')]",
            "[resourceId('Microsoft.ApiManagement/service/apis', parameters('service_dev-apim-kcloud-apim_name'),parameters('api_k-rauta-geo_name'))]"
          ]
        },
        {
          "comments": "Generated for resource /subscriptions/65477ea4-4648-4f81-a455-e3621372e6b9/resourceGroups/dev-apim-kcloud-rg/providers/Microsoft.ApiManagement/service/dev-apim-kcloud-apim/apis/k-rauta-geo/operations/postGeocode",
          "type": "Microsoft.ApiManagement/service/apis/operations",
          "name": "[concat(parameters('service_dev-apim-kcloud-apim_name'), '/', parameters('api_k-rauta-geo_name'), '/', 'postGeocode')]",
          "apiVersion": "2017-03-01",
          "properties": {
            "displayName": "Get WGS84 coordinates based on address",
            "method": "POST",
            "urlTemplate": "/geocode",
            "templateParameters": [],
            "description": "Get WGS84 coordinates based on address",
            "request": {
              "queryParameters": [],
              "headers": [
                {
                  "name": "x-performance-test-mode",
                  "description": "Enable performance test mode which doesn't request the live\n    gmaps API endpoint and returns a dummy response to avoid excessive requests\n    to Google's APIs.",
                  "type": "string",
                  "values": [
                    "true",
                    "false"
                  ]
                }
              ],
              "representations": [
                {
                  "contentType": "application/json",
                  "schemaId": "5bebe1baed7d2811743afe0f",
                  "typeName": "addressBody"
                }
              ]
            },
            "responses": [
              {
                "statusCode": 200,
                "description": "OK",
                "representations": [
                  {
                    "contentType": "application/json",
                    "schemaId": "5bebe1baed7d2811743afe0f",
                    "typeName": "SearchResponse",
                    "generatedSample": "{\r\n  \"coordinates\": {\r\n    \"lat\": 61.4977524,\r\n    \"lng\": 23.7609535\r\n  },\r\n  \"address\": {\r\n    \"postalCode\": \"string\",\r\n    \"city\": \"string\",\r\n    \"country\": \"string\"\r\n  },\r\n  \"type\": \"geocode\",\r\n  \"locationType\": \"PRECISE\"\r\n}"
                  }
                ],
                "headers": []
              }
            ],
            "policies": null
          },
          "resources": [
            {
              "comments": "Generated for resource /subscriptions/65477ea4-4648-4f81-a455-e3621372e6b9/resourceGroups/dev-apim-kcloud-rg/providers/Microsoft.ApiManagement/service/dev-apim-kcloud-apim/apis/k-rauta-geo/operations/postGeocode/policies/policy",
              "type": "Microsoft.ApiManagement/service/apis/operations/policies",
              "name": "[concat(parameters('service_dev-apim-kcloud-apim_name'), '/', parameters('api_k-rauta-geo_name'), '/', 'postGeocode', '/', 'policy')]",
              "apiVersion": "2017-03-01",
              "properties": {
                "policyContent": "[Concat('<!--\r\n    IMPORTANT:\r\n    - Policy elements can appear only within the <inbound>, <outbound>, <backend> section elements.\r\n    - To apply a policy to the incoming request (before it is forwarded to the backend service), place a corresponding policy element within the <inbound> section element.\r\n    - To apply a policy to the outgoing response (before it is sent back to the caller), place a corresponding policy element within the <outbound> section element.\r\n    - To add a policy, place the cursor at the desired insertion point and select a policy from the sidebar.\r\n    - To remove a policy, delete the corresponding policy statement from the policy document.\r\n    - Position the <base> element within a section element to inherit all policies from the corresponding section element in the enclosing scope.\r\n    - Remove the <base> element to prevent inheriting policies from the corresponding section element in the enclosing scope.\r\n    - Policies are applied in the order of their appearance, from the top down.\r\n    - Comments within policy elements are not supported and may disappear. Place your comments between policy elements or at a higher level scope.\r\n-->\r\n<policies>\r\n  <inbound>\r\n    <set-header name=\"x-gw-secret\" exists-action=\"override\">\r\n      <value>QQsfDQxDk6Y8eh0MbMXYtFb8zAHcmzJm</value>\r\n    </set-header>\r\n    <base />\r\n    <set-backend-service base-url=\"',parameters('api_k-rauta-geo_postGeocode_backendurl'),'\" />\r\n  </inbound>\r\n  <backend>\r\n    <base />\r\n  </backend>\r\n  <outbound>\r\n    <base />\r\n  </outbound>\r\n  <on-error>\r\n    <base />\r\n  </on-error>\r\n</policies>')]"
              },
              "resources": [],
              "dependsOn": [
                "[resourceId('Microsoft.ApiManagement/service/apis', parameters('service_dev-apim-kcloud-apim_name') , parameters('api_k-rauta-geo_name'))]",
                "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('service_dev-apim-kcloud-apim_name'), parameters('api_k-rauta-geo_name'), 'postGeocode')]"
              ]
            }
          ],
          "dependsOn": [
            "[resourceId('Microsoft.ApiManagement/service/apis/schemas', parameters('service_dev-apim-kcloud-apim_name'),parameters('api_k-rauta-geo_name'),'5bebe1baed7d2811743afe0f')]",
            "[resourceId('Microsoft.ApiManagement/service/apis', parameters('service_dev-apim-kcloud-apim_name'),parameters('api_k-rauta-geo_name'))]"
          ]
        },
        {
          "comments": "Generated for resource /subscriptions/65477ea4-4648-4f81-a455-e3621372e6b9/resourceGroups/dev-apim-kcloud-rg/providers/Microsoft.ApiManagement/service/dev-apim-kcloud-apim/apis/k-rauta-geo/schemas/5bebe1baed7d2811743afe0f",
          "type": "Microsoft.ApiManagement/service/apis/schemas",
          "name": "[concat(parameters('service_dev-apim-kcloud-apim_name'),'/',parameters('api_k-rauta-geo_name'), '/5bebe1baed7d2811743afe0f')]",
          "apiVersion": "2017-03-01",
          "properties": {
            "contentType": "application/vnd.ms-azure-apim.swagger.definitions+json",
            "document": {
              "definitions": {
                "coordinates": {
                  "type": "object",
                  "description": "The coordinates for the response",
                  "properties": {
                    "lat": {
                      "type": "number",
                      "description": "Latitude",
                      "example": 61.4977524
                    },
                    "lng": {
                      "type": "number",
                      "description": "Longitude",
                      "example": 23.7609535
                    }
                  },
                  "required": [
                    "lat",
                    "lng"
                  ]
                },
                "address": {
                  "type": "object",
                  "description": "Reverse geocoded address components",
                  "properties": {
                    "postalCode": {
                      "type": "string"
                    },
                    "city": {
                      "type": "string"
                    },
                    "country": {
                      "type": "string"
                    }
                  }
                },
                "SearchResponse": {
                  "type": "object",
                  "description": "OK",
                  "properties": {
                    "coordinates": {
                      "$ref": "#/definitions/coordinates",
                      "type": "object"
                    },
                    "address": {
                      "$ref": "#/definitions/address",
                      "type": "object"
                    },
                    "type": {
                      "type": "string",
                      "description": "Gmaps API used for the response. Can be \"geocode\" or \"default\".",
                      "example": "geocode"
                    },
                    "locationType": {
                      "type": "string",
                      "description": "Indicates the precision of the coordinates",
                      "example": "PRECISE",
                      "enum": [
                        "PRECISE",
                        "APPROXIMATE"
                      ]
                    }
                  },
                  "required": [
                    "type",
                    "locationType"
                  ]
                },
                "addressBody": {
                  "type": "object",
                  "properties": {
                    "streetAddress": {
                      "type": "string",
                      "description": "Street Address",
                      "example": "Rautatienkatu 1"
                    },
                    "addressLocality": {
                      "type": "string",
                      "description": "City",
                      "example": "Tampere"
                    },
                    "postalCode": {
                      "type": "string",
                      "description": "Postal Code / Zip",
                      "example": "33100"
                    },
                    "addressCountry": {
                      "type": "string",
                      "description": "Country code (ISO 3166-1 alpha-3)",
                      "example": "FIN",
                      "x-constraint": {
                        "length": 3
                      }
                    }
                  },
                  "required": [
                    "streetAddress",
                    "addressLocality"
                  ]
                }
              }
            }
          },
          "resources": [],
          "dependsOn": [
            "[resourceId('Microsoft.ApiManagement/service/apis', parameters('service_dev-apim-kcloud-apim_name'),parameters('api_k-rauta-geo_name'))]"
          ]
        }
      ],
      "dependsOn": []
    },
    {
      "comments": "Generated for resource /subscriptions/65477ea4-4648-4f81-a455-e3621372e6b9/resourceGroups/dev-apim-kcloud-rg/providers/Microsoft.ApiManagement/service/dev-apim-kcloud-apim/apis/k-rauta-merchandise-category-api",
      "type": "Microsoft.ApiManagement/service/apis",
      "name": "[concat(parameters('service_dev-apim-kcloud-apim_name'), '/' ,parameters('api_k-rauta-merchandise-category-api_name'))]",
      "apiVersion": "2017-03-01",
      "properties": {
        "displayName": "K-rauta Merchandise Category API",
        "apiRevision": "[parameters('k-rauta-merchandise-category-api_apiRevision')]",
        "description": null,
        "serviceUrl": "[parameters('k-rauta-merchandise-category-api_serviceUrl')]",
        "path": "categorise",
        "protocols": [
          "https"
        ],
        "authenticationSettings": {
          "oAuth2": null,
          "openid": null
        },
        "subscriptionKeyParameterNames": {
          "header": "Ocp-Apim-Subscription-Key",
          "query": "subscription-key"
        },
        "isCurrent": "[parameters('k-rauta-merchandise-category-api_isCurrent')]"
      },
      "resources": [
        {
          "comments": "Generated for resource /subscriptions/65477ea4-4648-4f81-a455-e3621372e6b9/resourceGroups/dev-apim-kcloud-rg/providers/Microsoft.ApiManagement/service/dev-apim-kcloud-apim/apis/k-rauta-merchandise-category-api/operations/getCategories",
          "type": "Microsoft.ApiManagement/service/apis/operations",
          "name": "[concat(parameters('service_dev-apim-kcloud-apim_name'), '/', parameters('api_k-rauta-merchandise-category-api_name'), '/', 'getCategories')]",
          "apiVersion": "2017-03-01",
          "properties": {
            "displayName": "Get all categories",
            "method": "GET",
            "urlTemplate": "/categories",
            "templateParameters": [],
            "description": "Get all categories",
            "request": {
              "queryParameters": [
                {
                  "name": "version",
                  "description": "Version of categories data (optional, defaults to latest)",
                  "type": "string",
                  "values": []
                }
              ],
              "headers": [],
              "representations": []
            },
            "responses": [
              {
                "statusCode": 200,
                "description": "Successful",
                "representations": [
                  {
                    "contentType": "application/json"
                  }
                ],
                "headers": []
              },
              {
                "statusCode": 400,
                "description": "Bad request, unknown version",
                "representations": [
                  {
                    "contentType": "application/json"
                  }
                ],
                "headers": []
              },
              {
                "statusCode": 401,
                "description": "Incorrect gateway secret",
                "representations": [
                  {
                    "contentType": "application/json"
                  }
                ],
                "headers": []
              }
            ],
            "policies": null
          },
          "resources": [
            {
              "comments": "Generated for resource /subscriptions/65477ea4-4648-4f81-a455-e3621372e6b9/resourceGroups/dev-apim-kcloud-rg/providers/Microsoft.ApiManagement/service/dev-apim-kcloud-apim/apis/k-rauta-merchandise-category-api/operations/getCategories/policies/policy",
              "type": "Microsoft.ApiManagement/service/apis/operations/policies",
              "name": "[concat(parameters('service_dev-apim-kcloud-apim_name'), '/', parameters('api_k-rauta-merchandise-category-api_name'), '/', 'getCategories', '/', 'policy')]",
              "apiVersion": "2017-03-01",
              "properties": {
                "policyContent": "[Concat('<!--\r\n    IMPORTANT:\r\n    - Policy elements can appear only within the <inbound>, <outbound>, <backend> section elements.\r\n    - To apply a policy to the incoming request (before it is forwarded to the backend service), place a corresponding policy element within the <inbound> section element.\r\n    - To apply a policy to the outgoing response (before it is sent back to the caller), place a corresponding policy element within the <outbound> section element.\r\n    - To add a policy, place the cursor at the desired insertion point and select a policy from the sidebar.\r\n    - To remove a policy, delete the corresponding policy statement from the policy document.\r\n    - Position the <base> element within a section element to inherit all policies from the corresponding section element in the enclosing scope.\r\n    - Remove the <base> element to prevent inheriting policies from the corresponding section element in the enclosing scope.\r\n    - Policies are applied in the order of their appearance, from the top down.\r\n    - Comments within policy elements are not supported and may disappear. Place your comments between policy elements or at a higher level scope.\r\n-->\r\n<policies>\r\n  <inbound>\r\n    <base />\r\n    <set-header name=\"x-gw-secret\" exists-action=\"append\">\r\n      <value>NTjB9ALuYnDZ6EjE3FS9KnG3Hk5sVgrM</value>\r\n    </set-header>\r\n    <set-backend-service base-url=\"',parameters('api_k-rauta-merchandise-category-api_getCategories_backendurl'),'\" />\r\n  </inbound>\r\n  <backend>\r\n    <base />\r\n  </backend>\r\n  <outbound>\r\n    <base />\r\n  </outbound>\r\n  <on-error>\r\n    <base />\r\n  </on-error>\r\n</policies>')]"
              },
              "resources": [],
              "dependsOn": [
                "[resourceId('Microsoft.ApiManagement/service/apis', parameters('service_dev-apim-kcloud-apim_name') , parameters('api_k-rauta-merchandise-category-api_name'))]",
                "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('service_dev-apim-kcloud-apim_name'), parameters('api_k-rauta-merchandise-category-api_name'), 'getCategories')]"
              ]
            }
          ],
          "dependsOn": [
            "[resourceId('Microsoft.ApiManagement/service/apis', parameters('service_dev-apim-kcloud-apim_name'),parameters('api_k-rauta-merchandise-category-api_name'))]"
          ]
        }
      ],
      "dependsOn": []
    },
    {
      "comments": "Generated for resource /subscriptions/65477ea4-4648-4f81-a455-e3621372e6b9/resourceGroups/dev-apim-kcloud-rg/providers/Microsoft.ApiManagement/service/dev-apim-kcloud-apim/apis/samistestapi",
      "type": "Microsoft.ApiManagement/service/apis",
      "name": "[concat(parameters('service_dev-apim-kcloud-apim_name'), '/' ,parameters('api_samistestapi_name'))]",
      "apiVersion": "2017-03-01",
      "properties": {
        "displayName": "SamisTestApi",
        "apiRevision": "[parameters('samistestapi_apiRevision')]",
        "description": null,
        "serviceUrl": "[parameters('samistestapi_serviceUrl')]",
        "path": "stest",
        "protocols": [
          "https"
        ],
        "authenticationSettings": {
          "oAuth2": null,
          "openid": null
        },
        "subscriptionKeyParameterNames": {
          "header": "Ocp-Apim-Subscription-Key",
          "query": "subscription-key"
        },
        "isCurrent": "[parameters('samistestapi_isCurrent')]"
      },
      "resources": [
        {
          "comments": "Generated for resource /subscriptions/65477ea4-4648-4f81-a455-e3621372e6b9/resourceGroups/dev-apim-kcloud-rg/providers/Microsoft.ApiManagement/service/dev-apim-kcloud-apim/apis/samistestapi/operations/getecho",
          "type": "Microsoft.ApiManagement/service/apis/operations",
          "name": "[concat(parameters('service_dev-apim-kcloud-apim_name'), '/', parameters('api_samistestapi_name'), '/', 'getecho')]",
          "apiVersion": "2017-03-01",
          "properties": {
            "displayName": "getEcho",
            "method": "GET",
            "urlTemplate": "/kaiku",
            "templateParameters": [],
            "description": "getEcho",
            "request": {
              "queryParameters": [],
              "headers": [],
              "representations": []
            },
            "responses": [
              {
                "statusCode": 200,
                "description": "",
                "representations": [],
                "headers": []
              }
            ],
            "policies": null
          },
          "resources": [
            {
              "comments": "Generated for resource /subscriptions/65477ea4-4648-4f81-a455-e3621372e6b9/resourceGroups/dev-apim-kcloud-rg/providers/Microsoft.ApiManagement/service/dev-apim-kcloud-apim/apis/samistestapi/operations/getecho/policies/policy",
              "type": "Microsoft.ApiManagement/service/apis/operations/policies",
              "name": "[concat(parameters('service_dev-apim-kcloud-apim_name'), '/', parameters('api_samistestapi_name'), '/', 'getecho', '/', 'policy')]",
              "apiVersion": "2017-03-01",
              "properties": {
                "policyContent": "<!--\r\n    IMPORTANT:\r\n    - Policy elements can appear only within the <inbound>, <outbound>, <backend> section elements.\r\n    - To apply a policy to the incoming request (before it is forwarded to the backend service), place a corresponding policy element within the <inbound> section element.\r\n    - To apply a policy to the outgoing response (before it is sent back to the caller), place a corresponding policy element within the <outbound> section element.\r\n    - To add a policy, place the cursor at the desired insertion point and select a policy from the sidebar.\r\n    - To remove a policy, delete the corresponding policy statement from the policy document.\r\n    - Position the <base> element within a section element to inherit all policies from the corresponding section element in the enclosing scope.\r\n    - Remove the <base> element to prevent inheriting policies from the corresponding section element in the enclosing scope.\r\n    - Policies are applied in the order of their appearance, from the top down.\r\n    - Comments within policy elements are not supported and may disappear. Place your comments between policy elements or at a higher level scope.\r\n-->\r\n<policies>\r\n  <inbound>\r\n    <base />\r\n    <mock-response status-code=\"200\" content-type=\"application/json\" />\r\n  </inbound>\r\n  <backend>\r\n    <base />\r\n  </backend>\r\n  <outbound>\r\n    <base />\r\n  </outbound>\r\n  <on-error>\r\n    <base />\r\n  </on-error>\r\n</policies>"
              },
              "resources": [],
              "dependsOn": [
                "[resourceId('Microsoft.ApiManagement/service/apis', parameters('service_dev-apim-kcloud-apim_name') , parameters('api_samistestapi_name'))]",
                "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('service_dev-apim-kcloud-apim_name'), parameters('api_samistestapi_name'), 'getecho')]"
              ]
            }
          ],
          "dependsOn": [
            "[resourceId('Microsoft.ApiManagement/service/apis', parameters('service_dev-apim-kcloud-apim_name'),parameters('api_samistestapi_name'))]"
          ]
        }
      ],
      "dependsOn": []
    },
    {
      "comments": "Generated for resource /subscriptions/65477ea4-4648-4f81-a455-e3621372e6b9/resourceGroups/dev-apim-kcloud-rg/providers/Microsoft.ApiManagement/service/dev-apim-kcloud-apim/apis/testiapi",
      "type": "Microsoft.ApiManagement/service/apis",
      "name": "[concat(parameters('service_dev-apim-kcloud-apim_name'), '/' ,parameters('api_testiapi_name'))]",
      "apiVersion": "2017-03-01",
      "properties": {
        "displayName": "TestiAPI",
        "apiRevision": "[parameters('testiapi_apiRevision')]",
        "description": "",
        "serviceUrl": null,
        "path": "testataan",
        "protocols": [
          "https"
        ],
        "authenticationSettings": {
          "oAuth2": null,
          "openid": null
        },
        "subscriptionKeyParameterNames": {
          "header": "Ocp-Apim-Subscription-Key",
          "query": "subscription-key"
        },
        "isCurrent": "[parameters('testiapi_isCurrent')]"
      },
      "resources": [
        {
          "comments": "Generated for resource /subscriptions/65477ea4-4648-4f81-a455-e3621372e6b9/resourceGroups/dev-apim-kcloud-rg/providers/Microsoft.ApiManagement/service/dev-apim-kcloud-apim/apis/testiapi/operations/mock",
          "type": "Microsoft.ApiManagement/service/apis/operations",
          "name": "[concat(parameters('service_dev-apim-kcloud-apim_name'), '/', parameters('api_testiapi_name'), '/', 'mock')]",
          "apiVersion": "2017-03-01",
          "properties": {
            "displayName": "mock",
            "method": "GET",
            "urlTemplate": "/mock",
            "templateParameters": [],
            "description": "",
            "request": {
              "queryParameters": [],
              "headers": [],
              "representations": []
            },
            "responses": [],
            "policies": null
          },
          "resources": [
            {
              "comments": "Generated for resource /subscriptions/65477ea4-4648-4f81-a455-e3621372e6b9/resourceGroups/dev-apim-kcloud-rg/providers/Microsoft.ApiManagement/service/dev-apim-kcloud-apim/apis/testiapi/operations/mock/policies/policy",
              "type": "Microsoft.ApiManagement/service/apis/operations/policies",
              "name": "[concat(parameters('service_dev-apim-kcloud-apim_name'), '/', parameters('api_testiapi_name'), '/', 'mock', '/', 'policy')]",
              "apiVersion": "2017-03-01",
              "properties": {
                "policyContent": "<!--\r\n    IMPORTANT:\r\n    - Policy elements can appear only within the <inbound>, <outbound>, <backend> section elements.\r\n    - To apply a policy to the incoming request (before it is forwarded to the backend service), place a corresponding policy element within the <inbound> section element.\r\n    - To apply a policy to the outgoing response (before it is sent back to the caller), place a corresponding policy element within the <outbound> section element.\r\n    - To add a policy, place the cursor at the desired insertion point and select a policy from the sidebar.\r\n    - To remove a policy, delete the corresponding policy statement from the policy document.\r\n    - Position the <base> element within a section element to inherit all policies from the corresponding section element in the enclosing scope.\r\n    - Remove the <base> element to prevent inheriting policies from the corresponding section element in the enclosing scope.\r\n    - Policies are applied in the order of their appearance, from the top down.\r\n    - Comments within policy elements are not supported and may disappear. Place your comments between policy elements or at a higher level scope.\r\n-->\r\n<policies>\r\n  <inbound>\r\n    <base />\r\n    <mock-response status-code=\"200\" content-type=\"application/json\" />\r\n  </inbound>\r\n  <backend>\r\n    <base />\r\n  </backend>\r\n  <outbound>\r\n    <base />\r\n  </outbound>\r\n  <on-error>\r\n    <base />\r\n  </on-error>\r\n</policies>"
              },
              "resources": [],
              "dependsOn": [
                "[resourceId('Microsoft.ApiManagement/service/apis', parameters('service_dev-apim-kcloud-apim_name') , parameters('api_testiapi_name'))]",
                "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('service_dev-apim-kcloud-apim_name'), parameters('api_testiapi_name'), 'mock')]"
              ]
            }
          ],
          "dependsOn": [
            "[resourceId('Microsoft.ApiManagement/service/apis', parameters('service_dev-apim-kcloud-apim_name'),parameters('api_testiapi_name'))]"
          ]
        }
      ],
      "dependsOn": []
    },
    {
      "comments": "Generated for resource /subscriptions/65477ea4-4648-4f81-a455-e3621372e6b9/resourceGroups/dev-apim-kcloud-rg/providers/Microsoft.ApiManagement/service/dev-apim-kcloud-apim/apis/updatedb",
      "type": "Microsoft.ApiManagement/service/apis",
      "name": "[concat(parameters('service_dev-apim-kcloud-apim_name'), '/' ,parameters('api_updatedb_name'))]",
      "apiVersion": "2017-03-01",
      "properties": {
        "displayName": "UpdateDB",
        "apiRevision": "[parameters('updatedb_apiRevision')]",
        "description": null,
        "serviceUrl": "[parameters('updatedb_serviceUrl')]",
        "path": "testing",
        "protocols": [
          "https"
        ],
        "authenticationSettings": {
          "oAuth2": null,
          "openid": null
        },
        "subscriptionKeyParameterNames": {
          "header": "Ocp-Apim-Subscription-Key",
          "query": "subscription-key"
        },
        "isCurrent": "[parameters('updatedb_isCurrent')]"
      },
      "resources": [
        {
          "comments": "Generated for resource /subscriptions/65477ea4-4648-4f81-a455-e3621372e6b9/resourceGroups/dev-apim-kcloud-rg/providers/Microsoft.ApiManagement/service/dev-apim-kcloud-apim/apis/updatedb/operations/create-resource",
          "type": "Microsoft.ApiManagement/service/apis/operations",
          "name": "[concat(parameters('service_dev-apim-kcloud-apim_name'), '/', parameters('api_updatedb_name'), '/', 'create-resource')]",
          "apiVersion": "2017-03-01",
          "properties": {
            "displayName": "sender",
            "method": "POST",
            "urlTemplate": "/",
            "templateParameters": [],
            "description": "A demonstration of a POST call based on the echo backend above. The request body is expected to contain JSON-formatted data (see example below). A policy is used to automatically transform any request sent in JSON directly to XML. In a real-world scenario this could be used to enable modern clients to speak to a legacy backend.",
            "request": {
              "queryParameters": [],
              "headers": [],
              "representations": [
                {
                  "contentType": "application/json",
                  "schemaId": "5bf51bf4ed7d2811743afe69",
                  "typeName": "custno"
                },
                {
                  "contentType": "application/xml",
                  "schemaId": "5bf51bf4ed7d2811743afe69",
                  "typeName": "custno"
                }
              ]
            },
            "responses": [
              {
                "statusCode": 200,
                "description": "Successsuccess",
                "representations": [],
                "headers": []
              },
              {
                "statusCode": 400,
                "description": "Mandatoryfield is missing",
                "representations": [],
                "headers": []
              }
            ],
            "policies": null
          },
          "resources": [
            {
              "comments": "Generated for resource /subscriptions/65477ea4-4648-4f81-a455-e3621372e6b9/resourceGroups/dev-apim-kcloud-rg/providers/Microsoft.ApiManagement/service/dev-apim-kcloud-apim/apis/updatedb/operations/create-resource/policies/policy",
              "type": "Microsoft.ApiManagement/service/apis/operations/policies",
              "name": "[concat(parameters('service_dev-apim-kcloud-apim_name'), '/', parameters('api_updatedb_name'), '/', 'create-resource', '/', 'policy')]",
              "apiVersion": "2017-03-01",
              "properties": {
                "policyContent": "<policies>\r\n  <inbound>\r\n    <base />\r\n  </inbound>\r\n  <backend>\r\n    <base />\r\n  </backend>\r\n  <outbound>\r\n    <base />\r\n  </outbound>\r\n  <on-error>\r\n    <base />\r\n  </on-error>\r\n</policies>"
              },
              "resources": [],
              "dependsOn": [
                "[resourceId('Microsoft.ApiManagement/service/apis', parameters('service_dev-apim-kcloud-apim_name') , parameters('api_updatedb_name'))]",
                "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('service_dev-apim-kcloud-apim_name'), parameters('api_updatedb_name'), 'create-resource')]"
              ]
            }
          ],
          "dependsOn": [
            "[resourceId('Microsoft.ApiManagement/service/apis/schemas', parameters('service_dev-apim-kcloud-apim_name'),parameters('api_updatedb_name'),'5bf51bf4ed7d2811743afe69')]",
            "[resourceId('Microsoft.ApiManagement/service/apis', parameters('service_dev-apim-kcloud-apim_name'),parameters('api_updatedb_name'))]"
          ]
        },
        {
          "comments": "Generated for resource /subscriptions/65477ea4-4648-4f81-a455-e3621372e6b9/resourceGroups/dev-apim-kcloud-rg/providers/Microsoft.ApiManagement/service/dev-apim-kcloud-apim/apis/updatedb/operations/recieve-resource",
          "type": "Microsoft.ApiManagement/service/apis/operations",
          "name": "[concat(parameters('service_dev-apim-kcloud-apim_name'), '/', parameters('api_updatedb_name'), '/', 'recieve-resource')]",
          "apiVersion": "2017-03-01",
          "properties": {
            "displayName": "sender",
            "method": "GET",
            "urlTemplate": "/",
            "templateParameters": [],
            "description": "A demonstration of a POST call based on the echo backend above. The request body is expected to contain JSON-formatted data (see example below). A policy is used to automatically transform any request sent in JSON directly to XML. In a real-world scenario this could be used to enable modern clients to speak to a legacy backend.",
            "request": {
              "queryParameters": [],
              "headers": [],
              "representations": [
                {
                  "contentType": "application/json",
                  "schemaId": "5bf51bf4ed7d2811743afe69",
                  "typeName": "custno"
                },
                {
                  "contentType": "application/xml",
                  "schemaId": "5bf51bf4ed7d2811743afe69",
                  "typeName": "custno"
                }
              ]
            },
            "responses": [
              {
                "statusCode": 200,
                "description": "Successsuccess",
                "representations": [],
                "headers": []
              },
              {
                "statusCode": 400,
                "description": "Mandatoryfield is missing",
                "representations": [],
                "headers": []
              }
            ],
            "policies": null
          },
          "resources": [
            {
              "comments": "Generated for resource /subscriptions/65477ea4-4648-4f81-a455-e3621372e6b9/resourceGroups/dev-apim-kcloud-rg/providers/Microsoft.ApiManagement/service/dev-apim-kcloud-apim/apis/updatedb/operations/recieve-resource/policies/policy",
              "type": "Microsoft.ApiManagement/service/apis/operations/policies",
              "name": "[concat(parameters('service_dev-apim-kcloud-apim_name'), '/', parameters('api_updatedb_name'), '/', 'recieve-resource', '/', 'policy')]",
              "apiVersion": "2017-03-01",
              "properties": {
                "policyContent": "<policies>\r\n  <inbound>\r\n    <base />\r\n    <set-backend-service base-url=\"https://api.openweathermap.org/data/2.5/forecast?id=7731911&amp;APPID=885cfe0f5744189fea072db8ec4f4093\" />\r\n  </inbound>\r\n  <backend>\r\n    <!-- <set-query-parameter name=\"APPID\" exists-action=\"override\">\r\n            <value>885cfe0f5744189fea072db8ec4f4093</value>\r\n        </set-query-parameter> -->\r\n  </backend>\r\n  <outbound>\r\n    <!--<set-header name=\"Resposne-code\" exists-action=\"append\">\r\n            <value>666</value>\r\n        </set-header>\r\n        <return-response>\r\n            <set-status code=\"200\" reason=\"ok\" />\r\n            <set-header name=\"rep\" exists-action=\"override\">\r\n                <value>StaticValue</value>\r\n            </set-header>\r\n            <set-body>StaticBody</set-body>\r\n        </return-response> -->\r\n  </outbound>\r\n  <on-error>\r\n    <base />\r\n  </on-error>\r\n</policies>"
              },
              "resources": [],
              "dependsOn": [
                "[resourceId('Microsoft.ApiManagement/service/apis', parameters('service_dev-apim-kcloud-apim_name') , parameters('api_updatedb_name'))]",
                "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('service_dev-apim-kcloud-apim_name'), parameters('api_updatedb_name'), 'recieve-resource')]"
              ]
            }
          ],
          "dependsOn": [
            "[resourceId('Microsoft.ApiManagement/service/apis/schemas', parameters('service_dev-apim-kcloud-apim_name'),parameters('api_updatedb_name'),'5bf51bf4ed7d2811743afe69')]",
            "[resourceId('Microsoft.ApiManagement/service/apis', parameters('service_dev-apim-kcloud-apim_name'),parameters('api_updatedb_name'))]"
          ]
        },
        {
          "comments": "Generated for resource /subscriptions/65477ea4-4648-4f81-a455-e3621372e6b9/resourceGroups/dev-apim-kcloud-rg/providers/Microsoft.ApiManagement/service/dev-apim-kcloud-apim/apis/updatedb/policies/policy",
          "type": "Microsoft.ApiManagement/service/apis/policies",
          "name": "[concat(parameters('service_dev-apim-kcloud-apim_name'), '/', parameters('api_updatedb_name'), '/', 'policy')]",
          "apiVersion": "2017-03-01",
          "properties": {
            "policyContent": "<policies>\r\n  <inbound>\r\n    <base />\r\n  </inbound>\r\n  <backend>\r\n    <base />\r\n  </backend>\r\n  <outbound>\r\n    <base />\r\n  </outbound>\r\n  <on-error>\r\n    <base />\r\n  </on-error>\r\n</policies>"
          },
          "resources": [],
          "dependsOn": [
            "[resourceId('Microsoft.ApiManagement/service/apis', parameters('service_dev-apim-kcloud-apim_name') , parameters('api_updatedb_name'))]"
          ]
        },
        {
          "comments": "Generated for resource /subscriptions/65477ea4-4648-4f81-a455-e3621372e6b9/resourceGroups/dev-apim-kcloud-rg/providers/Microsoft.ApiManagement/service/dev-apim-kcloud-apim/apis/updatedb/schemas/5bf51bf4ed7d2811743afe69",
          "type": "Microsoft.ApiManagement/service/apis/schemas",
          "name": "[concat(parameters('service_dev-apim-kcloud-apim_name'),'/',parameters('api_updatedb_name'), '/5bf51bf4ed7d2811743afe69')]",
          "apiVersion": "2017-03-01",
          "properties": {
            "contentType": "application/vnd.ms-azure-apim.swagger.definitions+json",
            "document": {
              "definitions": {
                "custno": {
                  "type": "integer",
                  "description": "Order Status",
                  "enum": [
                    "123",
                    "456",
                    "789"
                  ]
                }
              }
            }
          },
          "resources": [],
          "dependsOn": [
            "[resourceId('Microsoft.ApiManagement/service/apis', parameters('service_dev-apim-kcloud-apim_name'),parameters('api_updatedb_name'))]"
          ]
        }
      ],
      "dependsOn": []
    },
    {
      "comments": "Generated for resource /subscriptions/65477ea4-4648-4f81-a455-e3621372e6b9/resourceGroups/dev-apim-kcloud-rg/providers/Microsoft.ApiManagement/service/dev-apim-kcloud-apim/products/k-rauta-merchendise",
      "type": "Microsoft.ApiManagement/service/products",
      "name": "[concat(parameters('service_dev-apim-kcloud-apim_name'), '/' ,parameters('product_k-rauta-merchendise_name'))]",
      "apiVersion": "2017-03-01",
      "properties": {
        "displayName": "K-Rauta Merchendise",
        "description": "Product pertaining to Merchendise API - K Rauta",
        "terms": null,
        "subscriptionRequired": true,
        "approvalRequired": false,
        "subscriptionsLimit": 2,
        "state": "published"
      },
      "resources": [
        {
          "comments": "Generated for resource /subscriptions/65477ea4-4648-4f81-a455-e3621372e6b9/resourceGroups/dev-apim-kcloud-rg/providers/Microsoft.ApiManagement/service/dev-apim-kcloud-apim/products/k-rauta-merchendise/apis/k-rauta-merchandise-category-api",
          "type": "Microsoft.ApiManagement/service/products/apis",
          "name": "[concat(parameters('service_dev-apim-kcloud-apim_name'), '/', parameters('product_k-rauta-merchendise_name'), '/', parameters('api_k-rauta-merchandise-category-api_name'))]",
          "apiVersion": "2017-03-01",
          "properties": {
            "displayName": "K-rauta Merchandise Category API",
            "apiRevision": "1",
            "description": null,
            "serviceUrl": "https://aq8y1dy6gg.execute-api.eu-west-1.amazonaws.com",
            "path": "categorise",
            "protocols": [
              "https"
            ],
            "authenticationSettings": null,
            "subscriptionKeyParameterNames": null,
            "isCurrent": true
          },
          "resources": [],
          "dependsOn": [
            "[resourceId('Microsoft.ApiManagement/service/products', parameters('service_dev-apim-kcloud-apim_name'), parameters('product_k-rauta-merchendise_name'))]"
          ]
        }
      ],
      "dependsOn": []
    },
    {
      "comments": "Generated for resource /subscriptions/65477ea4-4648-4f81-a455-e3621372e6b9/resourceGroups/dev-apim-kcloud-rg/providers/Microsoft.ApiManagement/service/dev-apim-kcloud-apim/products/starter",
      "type": "Microsoft.ApiManagement/service/products",
      "name": "[concat(parameters('service_dev-apim-kcloud-apim_name'), '/' ,parameters('product_starter_name'))]",
      "apiVersion": "2017-03-01",
      "properties": {
        "displayName": "Starter",
        "description": "Subscribers will be able to run 5 calls/minute up to a maximum of 100 calls/week.",
        "terms": "",
        "subscriptionRequired": true,
        "approvalRequired": false,
        "subscriptionsLimit": 1,
        "state": "published"
      },
      "resources": [
        {
          "comments": "Generated for resource /subscriptions/65477ea4-4648-4f81-a455-e3621372e6b9/resourceGroups/dev-apim-kcloud-rg/providers/Microsoft.ApiManagement/service/dev-apim-kcloud-apim/products/starter/apis/echo-api",
          "type": "Microsoft.ApiManagement/service/products/apis",
          "name": "[concat(parameters('service_dev-apim-kcloud-apim_name'), '/', parameters('product_starter_name'), '/', parameters('api_echo-api_name'))]",
          "apiVersion": "2017-03-01",
          "properties": {
            "displayName": "Echo API",
            "apiRevision": "1",
            "description": null,
            "serviceUrl": "http://echoapi.cloudapp.net/api",
            "path": "echo",
            "protocols": [
              "https"
            ],
            "authenticationSettings": null,
            "subscriptionKeyParameterNames": null,
            "isCurrent": true
          },
          "resources": [],
          "dependsOn": [
            "[resourceId('Microsoft.ApiManagement/service/products', parameters('service_dev-apim-kcloud-apim_name'), parameters('product_starter_name'))]"
          ]
        },
        {
          "comments": "Generated for resource /subscriptions/65477ea4-4648-4f81-a455-e3621372e6b9/resourceGroups/dev-apim-kcloud-rg/providers/Microsoft.ApiManagement/service/dev-apim-kcloud-apim/products/starter/apis/k-rauta-api-warehouses-service",
          "type": "Microsoft.ApiManagement/service/products/apis",
          "name": "[concat(parameters('service_dev-apim-kcloud-apim_name'), '/', parameters('product_starter_name'), '/', parameters('api_k-rauta-api-warehouses-service_name'))]",
          "apiVersion": "2017-03-01",
          "properties": {
            "displayName": "K-rauta API Warehouses Service",
            "apiRevision": "1",
            "description": null,
            "serviceUrl": "https://pzpc5o3llb.execute-api.eu-west-1.amazonaws.com",
            "path": "api/k-rauta/warehouse-service",
            "protocols": [
              "https"
            ],
            "authenticationSettings": null,
            "subscriptionKeyParameterNames": null,
            "isCurrent": true
          },
          "resources": [],
          "dependsOn": [
            "[resourceId('Microsoft.ApiManagement/service/products', parameters('service_dev-apim-kcloud-apim_name'), parameters('product_starter_name'))]"
          ]
        },
        {
          "comments": "Generated for resource /subscriptions/65477ea4-4648-4f81-a455-e3621372e6b9/resourceGroups/dev-apim-kcloud-rg/providers/Microsoft.ApiManagement/service/dev-apim-kcloud-apim/products/starter/apis/k-rauta-geo",
          "type": "Microsoft.ApiManagement/service/products/apis",
          "name": "[concat(parameters('service_dev-apim-kcloud-apim_name'), '/', parameters('product_starter_name'), '/', parameters('api_k-rauta-geo_name'))]",
          "apiVersion": "2017-03-01",
          "properties": {
            "displayName": "K-Rauta Geo",
            "apiRevision": "1",
            "description": null,
            "serviceUrl": null,
            "path": "geo",
            "protocols": [
              "https"
            ],
            "authenticationSettings": null,
            "subscriptionKeyParameterNames": null,
            "isCurrent": true
          },
          "resources": [],
          "dependsOn": [
            "[resourceId('Microsoft.ApiManagement/service/products', parameters('service_dev-apim-kcloud-apim_name'), parameters('product_starter_name'))]"
          ]
        },
        {
          "comments": "Generated for resource /subscriptions/65477ea4-4648-4f81-a455-e3621372e6b9/resourceGroups/dev-apim-kcloud-rg/providers/Microsoft.ApiManagement/service/dev-apim-kcloud-apim/products/starter/apis/samistestapi",
          "type": "Microsoft.ApiManagement/service/products/apis",
          "name": "[concat(parameters('service_dev-apim-kcloud-apim_name'), '/', parameters('product_starter_name'), '/', parameters('api_samistestapi_name'))]",
          "apiVersion": "2017-03-01",
          "properties": {
            "displayName": "SamisTestApi",
            "apiRevision": "1",
            "description": null,
            "serviceUrl": "https://dev-apim-kcloud-apim.azure-api.net/stest",
            "path": "stest",
            "protocols": [
              "https"
            ],
            "authenticationSettings": null,
            "subscriptionKeyParameterNames": null,
            "isCurrent": true
          },
          "resources": [],
          "dependsOn": [
            "[resourceId('Microsoft.ApiManagement/service/products', parameters('service_dev-apim-kcloud-apim_name'), parameters('product_starter_name'))]"
          ]
        },
        {
          "comments": "Generated for resource /subscriptions/65477ea4-4648-4f81-a455-e3621372e6b9/resourceGroups/dev-apim-kcloud-rg/providers/Microsoft.ApiManagement/service/dev-apim-kcloud-apim/products/starter/apis/testiapi",
          "type": "Microsoft.ApiManagement/service/products/apis",
          "name": "[concat(parameters('service_dev-apim-kcloud-apim_name'), '/', parameters('product_starter_name'), '/', parameters('api_testiapi_name'))]",
          "apiVersion": "2017-03-01",
          "properties": {
            "displayName": "TestiAPI",
            "apiRevision": "1",
            "description": "",
            "serviceUrl": null,
            "path": "testataan",
            "protocols": [
              "https"
            ],
            "authenticationSettings": null,
            "subscriptionKeyParameterNames": null,
            "isCurrent": true
          },
          "resources": [],
          "dependsOn": [
            "[resourceId('Microsoft.ApiManagement/service/products', parameters('service_dev-apim-kcloud-apim_name'), parameters('product_starter_name'))]"
          ]
        }
      ],
      "dependsOn": []
    },
    {
      "comments": "Generated for resource /subscriptions/65477ea4-4648-4f81-a455-e3621372e6b9/resourceGroups/dev-apim-kcloud-rg/providers/Microsoft.ApiManagement/service/dev-apim-kcloud-apim/products/unlimited",
      "type": "Microsoft.ApiManagement/service/products",
      "name": "[concat(parameters('service_dev-apim-kcloud-apim_name'), '/' ,parameters('product_unlimited_name'))]",
      "apiVersion": "2017-03-01",
      "properties": {
        "displayName": "Unlimited",
        "description": "Subscribers have completely unlimited access to the API. Administrator approval is required.",
        "terms": null,
        "subscriptionRequired": true,
        "approvalRequired": true,
        "subscriptionsLimit": 1,
        "state": "published"
      },
      "resources": [
        {
          "comments": "Generated for resource /subscriptions/65477ea4-4648-4f81-a455-e3621372e6b9/resourceGroups/dev-apim-kcloud-rg/providers/Microsoft.ApiManagement/service/dev-apim-kcloud-apim/products/unlimited/apis/echo-api",
          "type": "Microsoft.ApiManagement/service/products/apis",
          "name": "[concat(parameters('service_dev-apim-kcloud-apim_name'), '/', parameters('product_unlimited_name'), '/', parameters('api_echo-api_name'))]",
          "apiVersion": "2017-03-01",
          "properties": {
            "displayName": "Echo API",
            "apiRevision": "1",
            "description": null,
            "serviceUrl": "http://echoapi.cloudapp.net/api",
            "path": "echo",
            "protocols": [
              "https"
            ],
            "authenticationSettings": null,
            "subscriptionKeyParameterNames": null,
            "isCurrent": true
          },
          "resources": [],
          "dependsOn": [
            "[resourceId('Microsoft.ApiManagement/service/products', parameters('service_dev-apim-kcloud-apim_name'), parameters('product_unlimited_name'))]"
          ]
        }
      ],
      "dependsOn": []
    }
  ],
  "outputs": {}
}
